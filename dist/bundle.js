(()=>{"use strict";const e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.querySelector(t),c=r.querySelector("form"),i=r.querySelector("h4"),l=r.querySelector("p");""!==n&&(i.textContent=n),""!==o&&(l.textContent=o),e.close=function(e){r.style.display="none",c&&c.reset(),r.removeEventListener("click",e)};var a=function t(n){var o=n.target;(o.closest(".form-close")||o.closest(".close-btn")||!o.closest(".form-content"))&&e.close(t)};r.style.display="block",r.addEventListener("click",a)};var t=document.querySelector(".clubs-list ul"),n=document.querySelector(".popup-menu"),o=0;function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const l=function(t){var n=document.getElementById(t),o=document.createElement("div"),r=n.querySelector(".personal-data input[type=checkbox]");n&&(!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__";function n(e){var n=e.keyCode,o=t,r=o.replace(/\D/g,""),c=this.value.replace(/\D/g,""),i=0,l=o.replace(/[_\d]/g,(function(e){return i<c.length?c.charAt(i++)||r.charAt(i):e}));-1!==(i=l.indexOf("_"))&&(l=l.slice(0,i));var a=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,".concat(e.length,"}")})).replace(/[+()]/g,"\\$&");(!(a=new RegExp("^".concat(a,"$"))).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}c(document.querySelectorAll(e)).forEach((function(e){e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)}))}("#".concat(t," input[name=phone]")),o.classList.add("status-msg"),n.addEventListener("input",(function(e){var t=e.target;t.matches("input[name=name]")&&(t.value=t.value.replace(/[^аА-яёЯЁ ]/,"")),r.checked||(o.classList.add("active"),o.textContent="Подтвердите согласие")})),n.addEventListener("change",(function(){r.checked&&(o.classList.remove("active"),o.textContent="")})),n.addEventListener("submit",(function(t){t.preventDefault();var c,i=new FormData(n),l={};if(n.appendChild(o),!r.checked)return o.classList.add("active"),void(o.textContent="Подтвердите согласие");o.textContent="Идет отправка...",o.classList.add("active"),i.forEach((function(e,t){l[t]=e})),(c=l,fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).then((function(t){if(o.classList.remove("active"),200!==t.status)throw new Error("status network not 200");e("#thanks")})).catch((function(t){e("#thanks","Ошибка","Что-то пошло не так..."),console.warn(t)})).finally((function(){n.reset(),o.classList.remove("active"),n.closest(".popup")&&(n.closest(".popup").style.display="none"),setTimeout((function(){return e.close()}),6e3)}))})))};var a,s,u,d,f,p,y,m,v,h,g;document.querySelector("html").addEventListener("click",(function(r){var c=r.target,i=null;if((i=c.closest(".clubs-list"))&&(o<1?(t.style.display="block",o+=1):c.closest(".clubs-list ul")||(t.style.display="none",o-=1)),i||"block"===t.style.display&&(t.style.display="none",o=0),c.closest(".menu-button")&&(n.style.display="flex"),(c.closest(".close-menu-btn")||c.closest(".popup-menu li"))&&(n.style.display="none"),i=c.closest(".free-visit")){var l=i.querySelector("a").dataset.popup;e(l)}(i=c.closest(".callback-btn"))&&e(i.dataset.popup),(i=c.closest(".fixed-gift"))&&(i.style.display="none",e("#gift"))})),f=document.getElementById("totop"),p=document.querySelector(".header-main").getBoundingClientRect().bottom/2,y=document.querySelector(".top-menu"),m=y.getBoundingClientRect().height,v=document.querySelector(".main-slider"),h=window.screen.width,g=function(){return window.pageYOffset||document.documentElement.scrollTop},f.style.display="none",window.addEventListener("scroll",(function(){var e;g()>p?(f.style.display="block",(e=f).addEventListener("click",(function t(n){n.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),e.removeEventListener("click",t)}))):f.style.display="none",h<768&&(g()>=y.getBoundingClientRect().bottom?(y.classList.add("fixed-header"),v.style.cssText="margin-top: ".concat(m,"px")):(y.classList.remove("fixed-header"),v.removeAttribute("style")))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".main-slider .slide",n=document.querySelectorAll(t),o=0,r=function(){n[o].style.display="none",(o+=1)>=n.length&&(o=0),n[o].style.display="inline-block"};setInterval(r,e)}(),a=document.getElementById("card_order"),s=document.getElementById("price-total"),u={mozaika:{1:1999,6:9900,9:13900,12:19900},schelkovo:{1:2999,6:14990,9:21990,12:24990},discount:0},d=function(e){return e.checked||e.matches(".price-message input")},a.addEventListener("change",(function(){var e,t=(e=a.elements,function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter(d);if(t.length>1){var n=t[1].value;""!==t[2].value.trim()&&"ТЕЛО2020"===t[2].value.trim()?u.discount=30:u.discount=0,Object.keys(u[n]).forEach((function(e){e===t[0].value&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s.textContent=e-Math.floor(e*(t/100))}(u[n][e],u.discount)}))}console.log(u)})),l("form1"),l("form2"),l("banner-form")})();