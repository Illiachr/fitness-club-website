(()=>{"use strict";const e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=document.querySelector(t),r=l.querySelector("form"),s=l.querySelector("h4"),c=l.querySelector("p");""!==n&&(s.textContent=n),""!==o&&(c.textContent=o),e.close=function(e){l.style.display="none",r&&r.reset(),l.removeEventListener("click",e)};var i=function t(n){var o=n.target;(o.closest(".form-close")||o.closest(".close-btn")||!o.closest(".form-content"))&&e.close(t)};l.style.display="block",l.addEventListener("click",i)};var t,n,o,l,r,s,c,i,a,u,d,p,m,y,f=document.querySelector(".clubs-list ul"),v=document.querySelector(".popup-menu"),h=0;function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}document.querySelector("html").addEventListener("click",(function(t){var n=t.target,o=null;if((o=n.closest(".clubs-list"))&&(h<1?(f.style.display="block",h+=1):n.closest(".clubs-list ul")||(f.style.display="none",h-=1)),o||"block"===f.style.display&&(f.style.display="none",h=0),n.closest(".menu-button")&&(v.style.display="flex"),(n.closest(".close-menu-btn")||n.closest(".popup-menu li"))&&(v.style.display="none"),o=n.closest(".free-visit")){var l=o.querySelector("a").dataset.popup;e(l)}(o=n.closest(".callback-btn"))&&e(o.dataset.popup),(o=n.closest(".fixed-gift"))&&(o.style.display="none",e("#gift"))})),i=document.getElementById("totop"),a=document.querySelector(".header-main").getBoundingClientRect().bottom/2,u=document.querySelector(".top-menu"),d=u.getBoundingClientRect().height,p=document.querySelector(".main-slider"),m=window.screen.width,y=function(){return window.pageYOffset||document.documentElement.scrollTop},i.style.display="none",window.addEventListener("scroll",(function(){var e;y()>a?(i.style.display="block",(e=i).addEventListener("click",(function t(n){n.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),e.removeEventListener("click",t)}))):i.style.display="none",m<768&&(y()>=u.getBoundingClientRect().bottom?(u.classList.add("fixed-header"),p.style.cssText="margin-top: ".concat(d,"px")):(u.classList.remove("fixed-header"),p.removeAttribute("style")))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".main-slider .slide",n=document.querySelectorAll(t),o=0,l=function(){n[o].style.display="none",(o+=1)>=n.length&&(o=0),n[o].style.display="inline-block"};setInterval(l,e)}(),t=document.getElementById("card_order"),n=document.getElementById("price-total"),o={mozaika:{1:1999,6:9900,9:13900,12:19900},schelkovo:{1:2999,6:14990,9:21990,12:24990},discount:0},l=function(e){return e.checked||e.matches(".price-message input")},t.addEventListener("change",(function(){var e,r=(e=t.elements,function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter(l),s=r[1].value;""!==r[2].value.trim()&&"ТЕЛО2019"===r[2].value.trim()&&(o.discount=30),Object.keys(o[s]).forEach((function(e){e===r[0].value&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n.textContent=e-Math.floor(e*(t/100))}(o[s][e],o.discount)}))})),r=document.getElementById("form2"),s=document.createElement("div"),c=r.querySelector(".personal-data input[type=checkbox]"),s.classList.add("status-msg"),r.addEventListener("input",(function(e){var t=e.target;t.matches("input[name=name]")&&(t.value=t.value.replace(/[^аА-яёЯЁ ]/,"")),t.matches("input[name=phone]")&&(t.value=t.value.replace(/[^+\d]/,""))})),r.addEventListener("submit",(function(t){t.preventDefault(),c.checked||(s.textContent="Подтвердите согласие");var n,o=new FormData(r),l={};r.appendChild(s),s.textContent="Идет отправка...",s.classList.add("active"),o.forEach((function(e,t){l[t]=e})),(n=l,fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).then((function(e){if(s.classList.remove("active"),t.target.closest(".popup").style.display="none",200!==e.status)throw new Error("status network not 200")})).catch((function(t){e("#thanks","Ошибка","Что-то пошло не так..."),console.warn(t)})).finally((function(){r.reset(),console.log(r.closest(".popup")),setTimeout((function(){e.close()}),2e3)}))}))})();